<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blogs | Jain Events and Caterers</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Read the latest blogs from Jain Events and Caterers. Get event tips, catering trends, and behind-the-scenes insights from Jaipur’s top catering experts." />
    <meta name="keywords"
        content="Jain Events blog, catering tips, Jaipur events, wedding planning, vegetarian catering blog, Mohit Rajora, event management Jaipur, blog Jain Events" />
    <meta name="author" content="Jain Events and Caterers" />

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="Blog | Jain Events and Caterers - Expert Tips & Stories" />
    <meta property="og:description"
        content="Explore articles, event highlights, and catering inspiration from the team at Jain Events and Caterers, Jaipur’s premier event planning service." />
    <meta property="og:image" content="https://jain-events-and-caterers.netlify.app/img/logo.jpg" />
    <meta property="og:url" content="https://jain-events-and-caterers.netlify.app/blog.html" />
    <meta property="og:type" content="website" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Blog | Jain Events and Caterers - Tips, Trends & Stories" />
    <meta name="twitter:description"
        content="Stay updated with the Jain Events and Caterers blog. Wedding ideas, catering insights, and event planning inspiration straight from Jaipur." />
    <meta name="twitter:image" content="https://jain-events-and-caterers.netlify.app/img/logo.jpg" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://jain-events-and-caterers.netlify.app/blog" />

    <!-- Favicon -->
    <link rel="icon" type="image/jpg" href="./img/logo.jpg" />

    <link href="src/css/output.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <style>
        .font-poppins {
            font-family: 'Poppins', sans-serif;
        }

        /* Limit content to 2 lines */
        .truncate-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>

    <!-- SEO Schema (JSON-LD) -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Blog",
            "name": "Jain Events and Caterers Blog",
            "url": "https://jain-events-and-caterers.netlify.app/blog.html",
            "description": "Expert catering and event insights from Jain Events and Caterers, Jaipur.",
            "publisher": {
                "@type": "Organization",
                "name": "Jain Events and Caterers",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://jain-events-and-caterers.netlify.app/img/logo.jpg"
                }
            }
        }
    </script>
</head>

<body class="bg-white text-black font-poppins">
    <!-- Navbar -->
    <div id="navbar-container"></div>

    <!-- Padding for fixed navbar -->
    <div class="h-20 md:h-24"></div>

    <section id="blog" class="bg-white py-16 px-4 md:px-12">
        <div class="max-w-7xl mx-auto text-center">
            <h2 class="text-4xl font-bold text-[#F8153E] mb-4">Our Blogs</h2>
            <p class="text-gray-600 mb-12 text-base md:text-lg">
                Get the latest updates, catering tips, event trends, and more from
                <span class="font-semibold text-[#F8153E]">Jain Events and Caterers</span>.
            </p>

            <!-- Search Box -->
            <div class="max-w-4xl mx-auto px-4 mb-8">
                <input type="text" id="blogSearch" placeholder="Search blogs..."
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#F8153E] transition" />
            </div>

            <!-- Blog Grid -->
            <div class="relative min-h-[300px]" id="blogGridWrapper">
                <!-- Loader -->
                <div id="loader"
                    class="absolute inset-0 flex flex-col items-center justify-center text-gray-600 bg-white/80 backdrop-blur-sm z-10 hidden">
                    <svg class="animate-spin h-10 w-10 text-[#F8153E] mb-3" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                        </circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"></path>
                    </svg>
                    <p class="text-gray-700 font-medium">Loading blogs...</p>
                </div>

                <!-- Actual Grid -->
                <div class="grid md:grid-cols-3 gap-8" id="blogGrid"></div>
            </div>
        </div>
    </section>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/917230888688" target="_blank"
        class="fixed bottom-6 right-6 z-50 flex items-center gap-3 bg-[#25D366] hover:bg-[#1ebe5d] text-white px-4 py-3 rounded-full shadow-xl transition-all duration-300 transform hover:scale-105">
        <img src="https://img.icons8.com/color/48/000000/whatsapp--v1.png" alt="WhatsApp" class="w-7 h-7">
        <span class="hidden sm:inline font-semibold text-base">WhatsApp Us</span>
    </a>

    <!-- Footer -->
    <footer class="text-center p-4 text-sm text-white bg-[#F8153E]">
        © 2025 Jain Events and Caterers. All rights reserved.
    </footer>

    <!--  Updated Script -->
    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            const blogGrid = document.getElementById("blogGrid");
            const searchInput = document.getElementById("blogSearch");
            const loader = document.getElementById("loader");
            loader.classList.remove("hidden");

            //  Function to convert markdown to HTML for previews
            function formatPreview(text) {
                if (!text) return "";
                return text
                    .replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>") // bold
                    .replace(/\*(.*?)\*/g, "<em>$1</em>") // italic
                    .replace(/__(.*?)__/g, "<u>$1</u>"); // underline
            }

            try {
                const res = await fetch("https://backend-jaine-cforrender.onrender.com/blogs");
                const blogs = await res.json();

                loader.classList.add("hidden");

                blogs.forEach(blog => {
                    const formattedPreview = formatPreview(blog.content);
                    const blogCard = `
            <div class="blog-card bg-white border rounded-2xl shadow-md hover:shadow-xl overflow-hidden transition duration-300">
              <img loading="lazy" src="${blog.image || 'img/JE&C/Blog image.jpg'}" alt="${blog.title || 'Jain Events blog image'}" class="w-full h-48 object-cover" />
              <div class="p-6 text-left">
                <h3 class="text-xl font-semibold text-[#F8153E] mb-2">${blog.title}</h3>
                <p class="text-gray-600 text-sm mb-4 truncate-2">${formattedPreview}</p>
                <a href="blog/${blog.slug}.html" class="text-[#F8153E] font-medium hover:underline">Read More →</a>
              </div>
            </div>
          `;
                    blogGrid.innerHTML += blogCard;
                });

                //  Search filter
                searchInput.addEventListener("input", (e) => {
                    const query = e.target.value.toLowerCase();
                    document.querySelectorAll(".blog-card").forEach(card => {
                        const title = card.querySelector("h3").textContent.toLowerCase();
                        const desc = card.querySelector("p").textContent.toLowerCase();
                        card.style.display = title.includes(query) || desc.includes(query) ? "block" : "none";
                    });
                });

            } catch (error) {
                console.error("Error fetching blogs:", error);
                loader.classList.add("hidden");
                blogGrid.innerHTML = `<p class="text-red-500 col-span-full text-center">Failed to load blogs.</p>`;
            }
        });
    </script>

    <script src="./js/include.js"></script>
</body>

</html>